var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,c=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,i=(e,s)=>{for(var a in s||(s={}))n.call(s,a)&&c(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&c(e,a,s[a]);return e},o=(e,t)=>s(e,a(t));import{r as l,j as d}from"./react-core-BgMqaZ7e.js";import{B as m}from"./critical-sections-DJGY1IJa.js";import{C as x,d as u}from"./page-CaseStudiesPage-DX336oqj.js";import{L as p}from"./router-DWQJP3mY.js";import"./vendor-CpI2Jcpd.js";import"./analytics-Cr-FmkW7.js";import"./forms-BAAm9TBY.js";const h="softdab_cookie_consent_v1",f={necessary:!0,analytics:!1,functional:!1,marketing:!1},j="🍪 We use cookies",y=()=>{const[e,s]=l.useState(!1),[a,t]=l.useState(f),[n,r]=l.useState(!1),c=l.useCallback(e=>{(null==e?void 0:e.analytics)?window.dispatchEvent(new CustomEvent("softdab:analytics-consent-granted")):window.dispatchEvent(new CustomEvent("softdab:analytics-consent-revoked")),(null==e?void 0:e.marketing)?window.dispatchEvent(new CustomEvent("softdab:marketing-consent-granted")):window.dispatchEvent(new CustomEvent("softdab:marketing-consent-revoked"))},[]),y=l.useCallback(e=>{try{localStorage.setItem(h,JSON.stringify(e))}catch(s){}c(e)},[c]);l.useEffect(()=>{try{const e=localStorage.getItem(h);if(e){const a=JSON.parse(e);t(i(i({},f),a)),c(i(i({},f),a)),s(!1)}else t(f),s(!0)}catch(e){t(f),s(!0)}},[c]),l.useEffect(()=>{const e=e=>{var a;s(!0),(null==(a=null==e?void 0:e.detail)?void 0:a.openCustomize)&&r(!0)};return window.addEventListener("softdab:open-cookie-banner",e),()=>window.removeEventListener("softdab:open-cookie-banner",e)},[]);const b=l.useCallback(()=>{const e={necessary:!0,analytics:!0,functional:!0,marketing:!0};t(e),y(e),s(!1)},[y]),g=l.useCallback(()=>{const e={necessary:!0,analytics:!1,functional:!1,marketing:!1};t(e),y(e),s(!1)},[y]),v=l.useCallback(()=>{y(a),s(!1)},[a,y]);return e?d.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[100] px-4 pb-4 sm:px-6 sm:pb-6",role:"dialog","aria-modal":"true","aria-label":"Cookie consent banner",children:d.jsx(x,{className:"max-w-4xl mx-auto shadow-2xl border border-gray-200 bg-white",tabIndex:-1,children:d.jsx(u,{className:"p-4 sm:p-6",children:d.jsxs("div",{className:"sm:flex sm:items-start sm:justify-between",children:[d.jsxs("div",{className:"sm:mr-6 flex-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:j}),d.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["We use cookies to ensure the site works properly and, with your consent, for analytics and marketing. Learn more in our"," ",d.jsx(p,{to:"/legal/cookies",className:"text-primary underline font-medium",children:"Cookies Policy"}),"."]}),n&&d.jsxs("div",{className:"mt-4 space-y-3 text-sm border-t pt-4",children:[d.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Customize your preferences:"}),d.jsxs("label",{className:"flex items-start gap-3 cursor-not-allowed opacity-60",children:[d.jsx("input",{type:"checkbox",checked:!0,disabled:!0,readOnly:!0,className:"mt-0.5"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Necessary (always on)"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Required for site functionality and security."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a.analytics,onChange:e=>t(s=>o(i({},s),{analytics:e.target.checked})),className:"mt-0.5"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Analytics"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Help us understand how you use our site."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a.functional,onChange:e=>t(s=>o(i({},s),{functional:e.target.checked})),className:"mt-0.5"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Functional"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Remember your preferences (language, region)."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a.marketing,onChange:e=>t(s=>o(i({},s),{marketing:e.target.checked})),className:"mt-0.5"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Marketing"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Personalized ads and conversion tracking."})]})]})]})]}),d.jsx("div",{className:"mt-4 sm:mt-0 flex-shrink-0 flex flex-col sm:flex-row gap-2",children:n?d.jsxs(d.Fragment,{children:[d.jsx(m,{variant:"outline",onClick:()=>r(!1),className:"whitespace-nowrap",children:"Back"}),d.jsx(m,{onClick:v,className:"whitespace-nowrap",children:"Save Preferences"})]}):d.jsxs(d.Fragment,{children:[d.jsx(m,{variant:"outline",onClick:()=>r(!0),className:"whitespace-nowrap",children:"Customize"}),d.jsx(m,{variant:"secondary",onClick:g,className:"whitespace-nowrap",children:"Reject All"}),d.jsx(m,{onClick:b,className:"whitespace-nowrap",children:"Accept All"})]})})]})})})}):null};export{y as default};
